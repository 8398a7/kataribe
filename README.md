kataribe
========

Nginx/Apache log profiler

## Demo

## Usage

- Add $request\_time to the end of [log\_format](http://nginx.org/en/docs/http/ngx_http_log_module.html#log_format)
- Pass access log to kataribe by stdin
```
# cat /var/log/nginx/access.log | kataribe
Sort By Count
 Count   Total       Mean     Stddev     Min     P50     P90     P95     P99     Max  Url/Regexp
151614   9.756   0.000064   0.000264   0.000   0.000   0.000   0.001   0.001   0.016  ^GET /stylesheets/
 50538   2.420   0.000048   0.000000   0.000   0.000   0.000   0.000   0.001   0.010  ^GET /images/
 45867   2.529   0.000055   0.000293   0.000   0.000   0.000   0.000   0.001   0.016  GET /
 25269  35.845   0.001419   0.000000   0.000   0.001   0.003   0.004   0.010   0.333  POST /login
  4671   7.967   0.001706   0.000000   0.000   0.001   0.003   0.005   0.011   0.067  GET /mypage
     1   0.790   0.790000   0.000000   0.790   0.790   0.790   0.790   0.790   0.790  GET /init
     1  45.810  45.810000   0.000000  45.810  45.810  45.810  45.810  45.810  45.810  GET /report

Sort By Total
 Count   Total       Mean     Stddev     Min     P50     P90     P95     P99     Max  Url/Regexp
     1  45.810  45.810000   0.000000  45.810  45.810  45.810  45.810  45.810  45.810  GET /report
 25269  35.845   0.001419   0.000000   0.000   0.001   0.003   0.004   0.010   0.333  POST /login
151614   9.756   0.000064   0.000264   0.000   0.000   0.000   0.001   0.001   0.016  ^GET /stylesheets/
  4671   7.967   0.001706   0.000000   0.000   0.001   0.003   0.005   0.011   0.067  GET /mypage
 45867   2.529   0.000055   0.000293   0.000   0.000   0.000   0.000   0.001   0.016  GET /
 50538   2.420   0.000048   0.000000   0.000   0.000   0.000   0.000   0.001   0.010  ^GET /images/
     1   0.790   0.790000   0.000000   0.790   0.790   0.790   0.790   0.790   0.790  GET /init

Sort By Mean
 Count   Total       Mean     Stddev     Min     P50     P90     P95     P99     Max  Url/Regexp
     1  45.810  45.810000   0.000000  45.810  45.810  45.810  45.810  45.810  45.810  GET /report
     1   0.790   0.790000   0.000000   0.790   0.790   0.790   0.790   0.790   0.790  GET /init
  4671   7.967   0.001706   0.000000   0.000   0.001   0.003   0.005   0.011   0.067  GET /mypage
 25269  35.845   0.001419   0.000000   0.000   0.001   0.003   0.004   0.010   0.333  POST /login
151614   9.756   0.000064   0.000264   0.000   0.000   0.000   0.001   0.001   0.016  ^GET /stylesheets/
 45867   2.529   0.000055   0.000293   0.000   0.000   0.000   0.000   0.001   0.016  GET /
 50538   2.420   0.000048   0.000000   0.000   0.000   0.000   0.000   0.001   0.010  ^GET /images/

Sort By Standard Deviation
 Count   Total       Mean     Stddev     Min     P50     P90     P95     P99     Max  Url/Regexp
 45867   2.529   0.000055   0.000293   0.000   0.000   0.000   0.000   0.001   0.016  GET /
151614   9.756   0.000064   0.000264   0.000   0.000   0.000   0.001   0.001   0.016  ^GET /stylesheets/
     1  45.810  45.810000   0.000000  45.810  45.810  45.810  45.810  45.810  45.810  GET /report
     1   0.790   0.790000   0.000000   0.790   0.790   0.790   0.790   0.790   0.790  GET /init
  4671   7.967   0.001706   0.000000   0.000   0.001   0.003   0.005   0.011   0.067  GET /mypage
 25269  35.845   0.001419   0.000000   0.000   0.001   0.003   0.004   0.010   0.333  POST /login
 50538   2.420   0.000048   0.000000   0.000   0.000   0.000   0.000   0.001   0.010  ^GET /images/

Sort By Maximum(100 Percentile)
 Count   Total       Mean     Stddev     Min     P50     P90     P95     P99     Max  Url/Regexp
     1  45.810  45.810000   0.000000  45.810  45.810  45.810  45.810  45.810  45.810  GET /report
     1   0.790   0.790000   0.000000   0.790   0.790   0.790   0.790   0.790   0.790  GET /init
 25269  35.845   0.001419   0.000000   0.000   0.001   0.003   0.004   0.010   0.333  POST /login
  4671   7.967   0.001706   0.000000   0.000   0.001   0.003   0.005   0.011   0.067  GET /mypage
 45867   2.529   0.000055   0.000293   0.000   0.000   0.000   0.000   0.001   0.016  GET /
151614   9.756   0.000064   0.000264   0.000   0.000   0.000   0.001   0.001   0.016  ^GET /stylesheets/
 50538   2.420   0.000048   0.000000   0.000   0.000   0.000   0.000   0.001   0.010  ^GET /images/

TOP 37 Slow Requests
 1  45.810  GET /report
 2   0.790  GET /init
 3   0.333  POST /login
 4   0.332  POST /login
 5   0.067  GET /mypage
 6   0.067  GET /mypage
 7   0.064  POST /login
 8   0.062  POST /login
 9   0.061  GET /mypage
10   0.061  POST /login
...
```

## Licence

Apache-2.0

## Author

[matsuu](https://github.com/matsuu)

